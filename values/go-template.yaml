name: "go-template"
image: "ghcr.io/iypetrov/go-template:1.15.0"
hostname: "template.ip812.com"
isInit: false
database:
  postgres:
    name: "template"
    host: "template-pg-rw.go-template.svc.cluster.local"
    image: "ghcr.io/cloudnative-pg/postgresql:16.1"
    username: "admin123"
    storageSize: "1Gi"
    retentionPolicy: "7d"
    backupsBucket: "pg-backups-202507041132"
    backupSchedule: "0 0 0 * * *"
env:
  - name: APP_ENV
    value: "prod"
  - name: APP_DOMAIN
    value: "{{ .Values.hostname }}"
  - name: APP_PORT
    value: "8080"
  - name: DB_NAME
    value: "{{ .Values.database.postgres.name }}"
  - name: DB_USERNAME
    valueFrom:
      secretKeyRef:
        name: "{{ .Values.name }}-creds"
        key: PG_USERNAME
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: "{{ .Values.name }}-creds"
        key: PG_PASSWORD
  - name: DB_ENDPOINT
    value: "{{ .Values.database.postgres.host }}"
  - name: DB_SSL_MODE
    value: disable
