---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
patches:
- target:
    kind: StatefulSet
    name: elasticsearch-master
    namespace: elasticsearch
  options:
    allowNameChange: true
    allowKindChange: true
  patch: |- 
    spec:
      template:
        spec:
          containers:
          - name: elasticsearch
            env:
            - name: ELASTIC_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: elasticsearch-secret
                  key: ES_PASSWORD
